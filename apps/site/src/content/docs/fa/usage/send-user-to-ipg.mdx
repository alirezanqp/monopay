---
title: انتقال کاربر به درگاه
description: مرحله ۲ از ۳ مرحله پرداخت
---

import { Code } from 'astro:components'

در این مرحله شما کاربر را با استفاده از اطلاعاتی که از مرحله پیش به دست آوردید به درگاه بفرستید

همان‌طور که در صفحه قبل گفته شد، مقدار برگشتی شامل موارد زیر است:

- `url`: لینکی که باید کاربر را به آن بفرستید.
- `method`: روشی که باید به آن کاربر را بفرستید. با‌توجه به درایور مورد استفاده می تواند `GET` یا `POST` باشد.
- `params`: اطلاعاتی که باید همراه با کاربر ارسال شوند.

برای فرستادن کاربر، یک فرم در سمت کاربر بسازید و...

1. صفت `action` فرم را مساوی با لینک قرار دهید.
2. صفت `method` آن را مساوی با متد قرار دهید.
3. اطلاعات فرم را به عنوان المان های `input` به فرم اضافه کنید.

:::tip 
در صورتی که صفحه‌های خود را از سمت سرور می فرستید‌، می توانید از متد `getScript` بر روی `paymentInfo` استفاده کنید تا مراحل بالا به صورت خودکار انجام شوند و کاربر به درگاه منتقل شود. به صورت زیر:

```ts
res.send(
  `<html>
    <body>
        <h1> We're redirecting you to the payment gateway... </h1>
        <script>${paymentInfo.getScript()}</script>
    </body>
  </html>`
);
```
:::
